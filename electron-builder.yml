appId: com.anaregdesign.localplayground
productName: Local Playground
publish:
  - provider: github
    owner: anaregdesign
    repo: local-playground
    releaseType: release

directories:
  output: dist/installers

files:
  - package.json
  - build/**
  - desktop/electron/**
  - skills/default/**

asar: true
asarUnpack:
  - node_modules/.prisma/client/*.node
npmRebuild: false

extraResources:
  - from: build/client
    to: build/client
    filter:
      - "**/*"
  - from: public
    to: public
    filter:
      - "**/*"
  - from: node_modules/.prisma/client
    to: node_modules/.prisma/client
    filter:
      - "**/*"

artifactName: "${productName}-${version}-${os}-${arch}.${ext}"

extraMetadata:
  main: desktop/electron/main.cjs

mac:
  icon: desktop/electron/assets/icon.icns
  identity: Developer ID Application
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: desktop/electron/entitlements.mac.plist
  entitlementsInherit: desktop/electron/entitlements.mac.inherit.plist
  notarize: true
  target:
    - target: dmg
    - target: zip
  category: public.app-category.developer-tools

win:
  icon: desktop/electron/assets/icon.ico
  target:
    - target: nsis
  signtoolOptions:
    signingHashAlgorithms:
      - sha256
    rfc3161TimeStampServer: http://timestamp.digicert.com
    timeStampServer: http://timestamp.digicert.com

nsis:
  installerIcon: desktop/electron/assets/icon.ico
  uninstallerIcon: desktop/electron/assets/icon.ico
  installerHeaderIcon: desktop/electron/assets/icon.ico
  oneClick: false
  perMachine: false
  allowElevation: true
  allowToChangeInstallationDirectory: true
